# nsgm create-config åŠŸèƒ½å®ç°

## âœ… å®ç°å®Œæˆ

nsgm é¡¹ç›®ç°åœ¨**å·²ç»æ”¯æŒä»é…ç½®æ–‡ä»¶æ‰¹é‡åˆ›å»ºæ¨¡å—**ï¼

## æ–°å¢åŠŸèƒ½

### å‘½ä»¤ï¼š`nsgm create-config`

```bash
nsgm create-config <config-file> [options]
```

### åŠŸèƒ½ç‰¹æ€§

1. **æ‰¹é‡åˆ›å»ºæ¨¡å—**ï¼šä» JSON é…ç½®æ–‡ä»¶ä¸€æ¬¡æ€§åˆ›å»ºå¤šä¸ªæ¨¡å—
2. **å®Œå…¨è‡ªå®šä¹‰å­—æ®µ**ï¼šæ”¯æŒæ‰€æœ‰å­—æ®µç±»å‹å’Œå±æ€§
3. **é¢„è§ˆæ¨¡å¼**ï¼š`--dry-run` å‚æ•°å¯é¢„è§ˆå°†è¦åˆ›å»ºçš„æ¨¡å—
4. **é€‰æ‹©æ€§åˆ›å»º**ï¼š`--module <name>` å‚æ•°å¯åˆ›å»ºæŒ‡å®šæ¨¡å—
5. **è¿›åº¦æ˜¾ç¤º**ï¼šæ˜¾ç¤ºåˆ›å»ºè¿›åº¦å’Œç»“æœç»Ÿè®¡
6. **é”™è¯¯å¤„ç†**ï¼šå¤±è´¥æ—¶ä¸å½±å“å…¶ä»–æ¨¡å—åˆ›å»º

## å®ç°æ–‡ä»¶

### 1. æ–°å¢å‘½ä»¤æ–‡ä»¶

**æ–‡ä»¶**ï¼š`src/cli/commands/create-config.ts`

åŠŸèƒ½ï¼š
- è¯»å– JSON é…ç½®æ–‡ä»¶
- éªŒè¯é…ç½®æ ¼å¼
- æ”¯æŒå•æ¨¡å—å’Œå¤šæ¨¡å—é…ç½®
- é¢„è§ˆæ¨¡å¼æ”¯æŒ
- æ‰¹é‡åˆ›å»ºé€»è¾‘
- è¿›åº¦æ˜¾ç¤ºå’Œé”™è¯¯å¤„ç†

### 2. æ³¨å†Œå‘½ä»¤

**æ–‡ä»¶**ï¼š`src/cli/registry.ts`

å·²å°† `create-config` å‘½ä»¤æ³¨å†Œåˆ° CLI ç³»ç»Ÿã€‚

### 3. å¯¼å‡ºå‘½ä»¤

**æ–‡ä»¶**ï¼š`src/cli/index.ts`

å·²å°†å‘½ä»¤å¯¼å‡ºåˆ° CLI æ¨¡å—ã€‚

### 4. ç¼–è¯‘æˆåŠŸ

```bash
cd nsgm
npm run tsbuild
# âœ… ç¼–è¯‘æˆåŠŸ
```

ç”Ÿæˆçš„æ–‡ä»¶ï¼š`lib/cli/commands/create-config.js`

## é…ç½®æ–‡ä»¶ç¤ºä¾‹

### å•æ¨¡å—é…ç½®

```json
{
  "controller": "product",
  "action": "manage",
  "dictionary": ".",
  "fields": [
    {
      "name": "name",
      "type": "varchar",
      "length": 255,
      "required": true,
      "comment": "å•†å“åç§°",
      "showInList": true,
      "showInForm": true,
      "searchable": true
    }
  ]
}
```

### å¤šæ¨¡å—é…ç½®

```json
[
  {
    "controller": "category",
    "fields": [...]
  },
  {
    "controller": "order",
    "fields": [...]
  }
]
```

å®Œæ•´ç¤ºä¾‹ï¼š`example-config.json`

## ä½¿ç”¨æ–¹æ³•

### 1. åŸºç¡€ä½¿ç”¨

```bash
# åˆ›å»ºæ‰€æœ‰æ¨¡å—
nsgm create-config config/modules.json

# åˆ›å»ºæŒ‡å®šæ¨¡å—
nsgm create-config config/modules.json --module category

# é¢„è§ˆæ¨¡å¼ï¼ˆä¸å®é™…åˆ›å»ºï¼‰
nsgm create-config config/modules.json --dry-run
```

### 2. åœ¨ nsgm-shop é¡¹ç›®ä¸­ä½¿ç”¨

```bash
# 1. æ›´æ–° nsgm-shop ä¾èµ–
cd nsgm-shop
npm install ../nsgm

# 2. ä½¿ç”¨æ–°å‘½ä»¤åˆ›å»ºæ¨¡å—
nsgm create-config config/ecommerce-modules-snake.json
```

## ä¸ä¹‹å‰å®ç°çš„å¯¹æ¯”

### ä¹‹å‰çš„å®ç°ï¼ˆcreate-from-config.jsï¼‰

åœ¨ nsgm-shop é¡¹ç›®ä¸­å®ç°çš„è„šæœ¬ï¼š

```javascript
// scripts/create-from-config.js
const createFiles = require('nsgm-cli/lib/generate').createFiles;

const config = loadConfig(configFile);
createFiles(config.controller, config.action, config.dictionary, config.fields);
```

**ç‰¹ç‚¹ï¼š**
- âœ… æ”¯æŒä»é…ç½®æ–‡ä»¶åˆ›å»º
- âœ… æ‰¹é‡åˆ›å»ºæ”¯æŒ
- âœ… é”™è¯¯å¤„ç†

**é™åˆ¶ï¼š**
- âŒ æ˜¯ç‹¬ç«‹çš„è„šæœ¬ï¼Œä¸æ˜¯ nsgm åŸç”Ÿå‘½ä»¤
- âŒ éœ€è¦åœ¨æ¯ä¸ªé¡¹ç›®ä¸­å¤åˆ¶

### ç°åœ¨çš„å®ç°ï¼ˆnsgm create-configï¼‰

ç›´æ¥é›†æˆåˆ° nsgm-cli ä¸­ï¼š

**ç‰¹ç‚¹ï¼š**
- âœ… åŸç”Ÿå‘½ä»¤ï¼Œæ— éœ€é¢å¤–è„šæœ¬
- âœ… è‡ªåŠ¨åŒ…å«åœ¨ nsgm-cli ä¸­
- âœ… æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼ˆè¿›åº¦æ˜¾ç¤ºã€é¢„è§ˆæ¨¡å¼ï¼‰
- âœ… æ”¯æŒæ‰€æœ‰ nsgm-cli ç‰¹æ€§

## å‘½ä»¤åˆ«å

- `nsgm create-config` - ä¸»å‘½ä»¤
- `nsgm -cc` - çŸ­åˆ«å
- `nsgm --create-config` - é•¿åˆ«å

## å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `<config-file>` | é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰ | `config/modules.json` |
| `--module <name>` | åˆ›å»ºæŒ‡å®šæ¨¡å— | `--module product` |
| `--all` | åˆ›å»ºæ‰€æœ‰æ¨¡å—ï¼ˆé»˜è®¤ï¼‰ | `--all` |
| `--dry-run` | é¢„è§ˆæ¨¡å¼ | `--dry-run` |

## è¾“å‡ºç¤ºä¾‹

### é¢„è§ˆæ¨¡å¼è¾“å‡º

```
ğŸ“‹ é¢„è§ˆæ¨¡å¼

å°†è¦åˆ›å»ºçš„æ¨¡å—:

1. product
   æ“ä½œ: manage
   ç›®å½•: ./
   å­—æ®µæ•°: 7
   å­—æ®µ: name, description, price, category_id, stock, image_url, status

2. category
   æ“ä½œ: manage
   ç›®å½•: ./
   å­—æ®µæ•°: 5
   å­—æ®µ: name, description, parent_id, sort_order, status

================================================
æ€»è®¡: 2 ä¸ªæ¨¡å—

ç§»é™¤ --dry-run å‚æ•°ä»¥å®é™…åˆ›å»ºæ¨¡å—
```

### åˆ›å»ºæ¨¡å¼è¾“å‡º

```
================================================
ğŸ“¦ å‡†å¤‡åˆ›å»º 2 ä¸ªæ¨¡å—

1. product
2. category

ç¡®è®¤åˆ›å»ºè¿™äº›æ¨¡å—ï¼Ÿ(Y/n) y

================================================
ğŸ“¦ åˆ›å»ºæ¨¡å— 1/2: product
â ™ æ­£åœ¨åˆ›å»ºæ–‡ä»¶...
âœ… æ§åˆ¶å™¨åˆ›å»ºå®Œæˆ!

================================================
ğŸ“¦ åˆ›å»ºæ¨¡å— 2/2: category
â ™ æ­£åœ¨åˆ›å»ºæ–‡ä»¶...
âœ… æ§åˆ¶å™¨åˆ›å»ºå®Œæˆ!

================================================
ğŸ‰ åˆ›å»ºå®Œæˆ

âœ… æˆåŠŸ: 2 ä¸ª
âŒ å¤±è´¥: 0 ä¸ª

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ…                      â”‚
â”‚  åˆ›å»ºå·²å®Œæˆï¼Œè¯·æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶ï¼  â”‚
â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æœ€ä½³å®è·µ

### 1. é…ç½®æ–‡ä»¶å‘½å

å»ºè®®ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°ï¼š
- `modules.json` - æ‰€æœ‰æ¨¡å—
- `core-modules.json` - æ ¸å¿ƒæ¨¡å—
- `feature-modules.json` - åŠŸèƒ½æ¨¡å—
- `ecommerce-modules.json` - ç”µå•†æ¨¡å—

### 2. å­—æ®µå‘½å

å§‹ç»ˆä½¿ç”¨**è›‡å½¢å‘½åï¼ˆsnake_caseï¼‰**ï¼š

```json
{
  "name": "user_id",        // âœ… æ­£ç¡®
  "name": "category_id",     // âœ… æ­£ç¡®
  "name": "total_amount",    // âœ… æ­£ç¡®
  "name": "create_date",     // âœ… æ­£ç¡®
  "name": "update_date"      // âœ… æ­£ç¡®
}
```

é¿å…é©¼å³°å‘½åï¼š

```json
{
  "name": "userId",         // âŒ ä¸æ¨è
  "name": "categoryId",      // âŒ ä¸æ¨è
  "name": "totalAmount",    // âŒ ä¸æ¨è
}
```

### 3. é…ç½®æ–‡ä»¶ç®¡ç†

å»ºè®®å°†é…ç½®æ–‡ä»¶æ”¾åœ¨ `config/` ç›®å½•ä¸‹ï¼š

```
project/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ modules.json
â”‚   â””â”€â”€ ecommerce-modules.json
â”œâ”€â”€ server/
â”œâ”€â”€ client/
â””â”€â”€ ...
```

### 4. ç‰ˆæœ¬æ§åˆ¶

å°†é…ç½®æ–‡ä»¶çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼š

```bash
git add config/*.json
git commit -m "Add module configurations"
```

## å·²çŸ¥é—®é¢˜

### Help å‘½ä»¤æœªæ˜¾ç¤ºæ–°å‘½ä»¤

**é—®é¢˜**ï¼š`nsgm help` å‘½ä»¤æœªæ˜¾ç¤º `create-config`

**åŸå› **ï¼šhelp å‘½ä»¤ç¡¬ç¼–ç äº†å‘½ä»¤åˆ—è¡¨ï¼Œæœªä»æ³¨å†Œè¡¨åŠ¨æ€è·å–

**ä¸´æ—¶è§£å†³æ–¹æ¡ˆ**ï¼šç›´æ¥ä½¿ç”¨å‘½ä»¤è€Œä¸æŸ¥çœ‹å¸®åŠ©

```bash
# ç›´æ¥ä½¿ç”¨å‘½ä»¤
nsgm create-config config/modules.json

# æˆ–ä½¿ç”¨åˆ«å
nsgm -cc config/modules.json
```

**è®¡åˆ’ä¿®å¤**ï¼šæ›´æ–° help å‘½ä»¤ä» registry åŠ¨æ€è·å–å‘½ä»¤åˆ—è¡¨

## æ–‡æ¡£

è¯¦ç»†æ–‡æ¡£ï¼š`CREATE-FROM-CONFIG.md`

åŒ…å«å†…å®¹ï¼š
- å‘½ä»¤ä½¿ç”¨è¯´æ˜
- é…ç½®æ–‡ä»¶æ ¼å¼
- å®Œæ•´ç¤ºä¾‹
- æœ€ä½³å®è·µ
- æ•…éšœæ’æŸ¥

## æ€»ç»“

### âœ… å·²å®ç°

1. nsgm-cli åŸç”Ÿæ”¯æŒé…ç½®æ–‡ä»¶åˆ›å»º
2. æ‰¹é‡åˆ›å»ºæ¨¡å—
3. å®Œå…¨è‡ªå®šä¹‰å­—æ®µ
4. é¢„è§ˆæ¨¡å¼
5. é€‰æ‹©æ€§åˆ›å»º
6. è¿›åº¦æ˜¾ç¤º
7. é”™è¯¯å¤„ç†

### ğŸ“ ä½¿ç”¨å»ºè®®

**é¡¹ç›®çº§åˆ«**ï¼šä½¿ç”¨ `nsgm create-config` ä½œä¸ºæ ‡å‡†å‘½ä»¤
**ä¸ªäººé¡¹ç›®**ï¼šå¯ä»¥ç»§ç»­ä½¿ç”¨ `scripts/create-from-config.js` è„šæœ¬

ä¸¤ç§æ–¹å¼éƒ½èƒ½å®ç°ç›®æ ‡ï¼Œé€‰æ‹©é€‚åˆä½ åœºæ™¯çš„æ–¹å¼ï¼
